{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { HeaderComponent } from '../../shared/components/header/header.component';\nlet UploadComponent = class UploadComponent {\n  constructor(api) {\n    this.api = api;\n    this.slots = [{\n      key: 'offices',\n      label: 'Offices CSV',\n      icon: 'ðŸ¢',\n      description: 'office_name, address, city, lat, lng',\n      file: null,\n      status: 'idle',\n      message: ''\n    }, {\n      key: 'managers',\n      label: 'Managers CSV',\n      icon: 'ðŸ‘¥',\n      description: 'full_name, position, skills, business_unit, current_workload, office_name',\n      file: null,\n      status: 'idle',\n      message: ''\n    }, {\n      key: 'tickets',\n      label: 'Tickets CSV',\n      icon: 'ðŸŽ«',\n      description: 'client_guid, gender, date_of_birth, segment, description, attachments, country, region, city, street, house',\n      file: null,\n      status: 'idle',\n      message: ''\n    }];\n  }\n  onFileDrop(event, slot) {\n    event.preventDefault();\n    const file = event.dataTransfer?.files[0];\n    if (file) {\n      slot.file = file;\n    }\n  }\n  onDragOver(event) {\n    event.preventDefault();\n  }\n  onFileSelect(event, slot) {\n    const input = event.target;\n    if (input.files?.[0]) {\n      slot.file = input.files[0];\n    }\n  }\n  upload(slot) {\n    if (!slot.file) return;\n    slot.status = 'uploading';\n    const obs = slot.key === 'tickets' ? this.api.uploadTickets(slot.file) : slot.key === 'managers' ? this.api.uploadManagers(slot.file) : this.api.uploadOffices(slot.file);\n    obs.subscribe({\n      next: res => {\n        slot.status = 'done';\n        slot.message = `âœ“ ${res.message ?? 'Uploaded successfully'}`;\n      },\n      error: () => {\n        slot.status = 'error';\n        slot.message = 'âœ— Upload failed. Check backend connection.';\n      }\n    });\n  }\n  clearSlot(slot) {\n    slot.file = null;\n    slot.status = 'idle';\n    slot.message = '';\n  }\n};\nUploadComponent = __decorate([Component({\n  selector: 'app-upload',\n  standalone: true,\n  imports: [CommonModule, RouterModule, HeaderComponent],\n  templateUrl: './upload.component.html',\n  styleUrls: ['./upload.component.scss']\n})], UploadComponent);\nexport { UploadComponent };","map":{"version":3,"names":["Component","CommonModule","RouterModule","HeaderComponent","UploadComponent","constructor","api","slots","key","label","icon","description","file","status","message","onFileDrop","event","slot","preventDefault","dataTransfer","files","onDragOver","onFileSelect","input","target","upload","obs","uploadTickets","uploadManagers","uploadOffices","subscribe","next","res","error","clearSlot","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["C:\\Users\\Batyr\\Downloads\\freedom_case\\frontend\\src\\app\\features\\upload\\upload.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { ApiService } from '../../core/services/api.service';\r\nimport { HeaderComponent } from '../../shared/components/header/header.component';\r\n\r\ninterface UploadSlot {\r\n  key: 'tickets' | 'managers' | 'offices';\r\n  label: string;\r\n  icon: string;\r\n  description: string;\r\n  file: File | null;\r\n  status: 'idle' | 'uploading' | 'done' | 'error';\r\n  message: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-upload',\r\n  standalone: true,\r\n  imports: [CommonModule, RouterModule, HeaderComponent],\r\n  templateUrl: './upload.component.html',\r\n  styleUrls: ['./upload.component.scss']\r\n})\r\nexport class UploadComponent {\r\n  slots: UploadSlot[] = [\r\n    { key: 'offices',  label: 'Offices CSV',  icon: 'ðŸ¢', description: 'office_name, address, city, lat, lng', file: null, status: 'idle', message: '' },\r\n    { key: 'managers', label: 'Managers CSV', icon: 'ðŸ‘¥', description: 'full_name, position, skills, business_unit, current_workload, office_name', file: null, status: 'idle', message: '' },\r\n    { key: 'tickets',  label: 'Tickets CSV',  icon: 'ðŸŽ«', description: 'client_guid, gender, date_of_birth, segment, description, attachments, country, region, city, street, house', file: null, status: 'idle', message: '' },\r\n  ];\r\n\r\n  constructor(private api: ApiService) {}\r\n\r\n  onFileDrop(event: DragEvent, slot: UploadSlot) {\r\n    event.preventDefault();\r\n    const file = event.dataTransfer?.files[0];\r\n    if (file) { slot.file = file; }\r\n  }\r\n\r\n  onDragOver(event: DragEvent) { event.preventDefault(); }\r\n\r\n  onFileSelect(event: Event, slot: UploadSlot) {\r\n    const input = event.target as HTMLInputElement;\r\n    if (input.files?.[0]) { slot.file = input.files[0]; }\r\n  }\r\n\r\n  upload(slot: UploadSlot) {\r\n    if (!slot.file) return;\r\n    slot.status = 'uploading';\r\n\r\n    const obs = slot.key === 'tickets'  ? this.api.uploadTickets(slot.file)\r\n              : slot.key === 'managers' ? this.api.uploadManagers(slot.file)\r\n              : this.api.uploadOffices(slot.file);\r\n\r\n    obs.subscribe({\r\n      next: (res) => {\r\n        slot.status = 'done';\r\n        slot.message = `âœ“ ${res.message ?? 'Uploaded successfully'}`;\r\n      },\r\n      error: () => {\r\n        slot.status = 'error';\r\n        slot.message = 'âœ— Upload failed. Check backend connection.';\r\n      }\r\n    });\r\n  }\r\n\r\n  clearSlot(slot: UploadSlot) {\r\n    slot.file = null;\r\n    slot.status = 'idle';\r\n    slot.message = '';\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}