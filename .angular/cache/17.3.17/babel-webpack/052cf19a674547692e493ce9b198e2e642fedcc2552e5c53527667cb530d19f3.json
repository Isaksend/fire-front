{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ApiService = /*#__PURE__*/(() => {\n  class ApiService {\n    constructor(http) {\n      this.http = http;\n      this.base = '/api';\n    }\n    // ── Tickets ────────────────────────────────────────────────────────────────\n    getTickets(filters) {\n      let params = new HttpParams();\n      if (filters) {\n        Object.entries(filters).forEach(([k, v]) => {\n          if (v !== undefined && v !== null && v !== '') {\n            params = params.set(k, String(v));\n          }\n        });\n      }\n      return this.http.get(`${this.base}/tickets`, {\n        params\n      });\n    }\n    getTicket(id) {\n      return this.http.get(`${this.base}/tickets/${id}`);\n    }\n    updateTicketStatus(id, status) {\n      return this.http.patch(`${this.base}/tickets/${id}/status`, null, {\n        params: {\n          status\n        }\n      });\n    }\n    // ── Upload ─────────────────────────────────────────────────────────────────\n    uploadTickets(file) {\n      const form = new FormData();\n      form.append('file', file);\n      return this.http.post(`${this.base}/upload/tickets`, form);\n    }\n    uploadManagers(file) {\n      const form = new FormData();\n      form.append('file', file);\n      return this.http.post(`${this.base}/upload/managers`, form);\n    }\n    uploadOffices(file) {\n      const form = new FormData();\n      form.append('file', file);\n      return this.http.post(`${this.base}/upload/offices`, form);\n    }\n    triggerProcessing() {\n      return this.http.post(`${this.base}/process`, {});\n    }\n    // ── Managers & Offices ────────────────────────────────────────────────────\n    getManagers() {\n      return this.http.get(`${this.base}/managers`);\n    }\n    getOffices() {\n      return this.http.get(`${this.base}/offices`);\n    }\n    getStats() {\n      return this.http.get(`${this.base}/stats`);\n    }\n    static {\n      this.ɵfac = function ApiService_Factory(t) {\n        return new (t || ApiService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ApiService,\n        factory: ApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ApiService;\n})();","map":{"version":3,"names":["HttpParams","ApiService","constructor","http","base","getTickets","filters","params","Object","entries","forEach","k","v","undefined","set","String","get","getTicket","id","updateTicketStatus","status","patch","uploadTickets","file","form","FormData","append","post","uploadManagers","uploadOffices","triggerProcessing","getManagers","getOffices","getStats","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Batyr\\Downloads\\freedom_case\\frontend\\src\\app\\core\\services\\api.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { Ticket, Manager, Office, Stats, TicketFilters } from '../models/ticket.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ApiService {\r\n  private base = '/api';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  // ── Tickets ────────────────────────────────────────────────────────────────\r\n  getTickets(filters?: TicketFilters): Observable<Ticket[]> {\r\n    let params = new HttpParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([k, v]) => {\r\n        if (v !== undefined && v !== null && v !== '') {\r\n          params = params.set(k, String(v));\r\n        }\r\n      });\r\n    }\r\n    return this.http.get<Ticket[]>(`${this.base}/tickets`, { params });\r\n  }\r\n\r\n  getTicket(id: number): Observable<Ticket> {\r\n    return this.http.get<Ticket>(`${this.base}/tickets/${id}`);\r\n  }\r\n\r\n  updateTicketStatus(id: number, status: string): Observable<any> {\r\n    return this.http.patch(`${this.base}/tickets/${id}/status`, null, {\r\n      params: { status }\r\n    });\r\n  }\r\n\r\n  // ── Upload ─────────────────────────────────────────────────────────────────\r\n  uploadTickets(file: File): Observable<any> {\r\n    const form = new FormData();\r\n    form.append('file', file);\r\n    return this.http.post(`${this.base}/upload/tickets`, form);\r\n  }\r\n\r\n  uploadManagers(file: File): Observable<any> {\r\n    const form = new FormData();\r\n    form.append('file', file);\r\n    return this.http.post(`${this.base}/upload/managers`, form);\r\n  }\r\n\r\n  uploadOffices(file: File): Observable<any> {\r\n    const form = new FormData();\r\n    form.append('file', file);\r\n    return this.http.post(`${this.base}/upload/offices`, form);\r\n  }\r\n\r\n  triggerProcessing(): Observable<any> {\r\n    return this.http.post(`${this.base}/process`, {});\r\n  }\r\n\r\n  // ── Managers & Offices ────────────────────────────────────────────────────\r\n  getManagers(): Observable<Manager[]> {\r\n    return this.http.get<Manager[]>(`${this.base}/managers`);\r\n  }\r\n\r\n  getOffices(): Observable<Office[]> {\r\n    return this.http.get<Office[]>(`${this.base}/offices`);\r\n  }\r\n\r\n  getStats(): Observable<Stats> {\r\n    return this.http.get<Stats>(`${this.base}/stats`);\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}